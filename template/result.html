<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>基质计算器结果</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Microsoft YaHei', 'Arial', sans-serif;
            background: #1a1a1a;
            color: #e0e0e0;
            padding: 20px;
        }
        .container {
            max-width: 580px;
            margin: 0 auto;
        }
        .title {
            font-size: 20px;
            color: #fffa00;
            text-align: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 3px solid #fffa00;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(255, 250, 0, 0.5);
        }
        .weapon-info {
            background: #2a2a2a url('images/efline.png');
            background-size: cover;
            background-position: center;
            border-radius: 4px;
            padding: 12px;
            margin-bottom: 15px;
            border: 2px solid #fffa00;
            box-shadow: 0 0 15px rgba(255, 250, 0, 0.3);
        }
        /* weapon-info 稀有度样式 */
        .weapon-info.rarity-6 {
            border: 2px solid #ff7100;
            background: linear-gradient(135deg, rgba(255, 113, 0, 0.2), #2a2a2a), url('images/efline.png');
            background-size: auto, cover;
            background-position: center, center;
            box-shadow: 0 0 20px rgba(255, 113, 0, 0.4);
        }
        .weapon-info.rarity-5 {
            border: 2px solid #f5a623;
            background: linear-gradient(135deg, rgba(245, 166, 35, 0.2), #2a2a2a), url('images/efline.png');
            background-size: auto, cover;
            background-position: center, center;
            box-shadow: 0 0 20px rgba(245, 166, 35, 0.4);
        }
        .weapon-info.rarity-4 {
            border: 2px solid #9452fa;
            background: linear-gradient(135deg, rgba(148, 82, 250, 0.2), #2a2a2a), url('images/efline.png');
            background-size: auto, cover;
            background-position: center, center;
            box-shadow: 0 0 20px rgba(148, 82, 250, 0.4);
        }
        .weapon-info.rarity-3 {
            border: 2px solid #26bbfd;
            background: linear-gradient(135deg, rgba(38, 187, 253, 0.2), #2a2a2a), url('images/efline.png');
            background-size: auto, cover;
            background-position: center, center;
            box-shadow: 0 0 20px rgba(38, 187, 253, 0.4);
        }
        .weapon-name {
            font-size: 18px;
            color: #fffa00;
            font-weight: bold;
        }
        .stat-row {
            display: flex;
            margin: 5px 0;
        }
        .stat-label {
            color: #999;
            width: 80px;
            font-weight: 500;
        }
        .stat-value {
            color: #e0e0e0;
        }
        .choice-card {
            background: #2a2a2a;
            border: 2px solid #fffa00;
            border-radius: 4px;
            padding: 12px;
            margin-bottom: 12px;
            box-shadow: 0 0 15px rgba(255, 250, 0, 0.2);
        }
        .choice-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.12);
        }
        .choice-header {
            font-size: 16px;
            color: #fffa00;
            margin-bottom: 8px;
            font-weight: bold;
        }
        .weapon-icon {
            width: 60px;
            height: 60px;
            border-radius: 4px;
            margin-right: 10px;
        }
        .weapon-icon-bordered {
            width: 60px;
            height: 60px;
            border-radius: 4px;
            margin-right: 10px;
            border: 2px solid #fffa00;
        }
        .weapon-small-icon {
            width: 40px;
            height: 40px;
            border-radius: 4px;
            margin-right: 8px;
        }
        .conditions {
            color: #999;
            font-size: 14px;
            margin-bottom: 15px;
            text-align: center;
            background: #2a2a2a;
            padding: 8px;
            border-radius: 4px;
        }
        .weapon-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            max-height: 300px;
            overflow-y: auto;
        }
        .weapon-item {
            display: flex;
            align-items: center;
            background: #1f1f1f url('images/efline.png');
            background-size: cover;
            background-position: center;
            border-radius: 4px;
            padding: 6px 8px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.5);
            flex: 0 0 calc(50% - 4px);
            min-width: 0;
            border: 1px solid #444;
        }
        /* 6星 - 橙色 */
        .rarity-6 {
            border-left: 4px solid #ff7100;
            background: linear-gradient(to right, rgba(255, 113, 0, 0.15), #1f1f1f), url('images/efline.png');
            background-size: auto, cover;
            background-position: center, center;
        }
        /* 5星 - 金色 */
        .rarity-5 {
            border-left: 4px solid #f5a623;
            background: linear-gradient(to right, rgba(245, 166, 35, 0.15), #1f1f1f), url('images/efline.png');
            background-size: auto, cover;
            background-position: center, center;
        }
        /* 4星 - 紫色 */
        .rarity-4 {
            border-left: 4px solid #9452fa;
            background: linear-gradient(to right, rgba(148, 82, 250, 0.15), #1f1f1f), url('images/efline.png');
            background-size: auto, cover;
            background-position: center, center;
        }
        /* 3星 - 蓝色 */
        .rarity-3 {
            border-left: 4px solid #26bbfd;
            background: linear-gradient(to right, rgba(38, 187, 253, 0.15), #1f1f1f), url('images/efline.png');
            background-size: auto, cover;
            background-position: center, center;
        }
        .query-weapons-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }
        .query-weapon-card {
            flex: 1;
            min-width: 250px;
        }
        .separator {
            border-top: 2px dashed #444;
            margin: 20px 0;
        }
        .weapon-stats {
            font-size: 12px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        @media (max-width: 400px) {
            .weapon-stats {
                font-size: 10px;
            }
        }
    </style>
</head>
<body>
<div id="app" class="container">
    <h1 class="title">{{ data.title }}</h1>

    <!-- 单武器查询 -->
    <div class="weapon-info" :class="data.rarity_class" v-if="data.weapon_name">
        <div style="display:flex;align-items:center;">
            <img class="weapon-icon"
                 :src="'images/' + data.weapon_id + '.webp'"
                 @error="imgError">
            <div style="flex:1;">
                <div class="weapon-name">{{ data.weapon_name }}</div>
                <div class="stat-row">
                    <span class="stat-label">类型:</span>
                    <span class="stat-value">{{ data.weapon_type }}</span>
                </div>
                <div class="stat-row weapon-stats">
                    <span class="stat-value">{{ data.attribute }} | {{ data.secondary }} | {{ data.skill }}</span>
                </div>
            </div>
        </div>
    </div>

    <!-- 多武器同时刷取查询 -->
    <div class="query-weapons-container" v-if="data.is_multi_weapon && data.query_weapons">
        <div class="weapon-info query-weapon-card"
             :class="weapon.rarity_class"
             v-for="weapon in data.query_weapons"
             :key="weapon.id">
            <div style="display:flex;align-items:center;">
                <img class="weapon-icon"
                     :src="'images/' + weapon.id + '.webp'"
                     @error="imgError">
                <div style="flex:1;">
                    <div class="weapon-name">{{ weapon.name }}</div>
                    <div class="stat-row">
                        <span class="stat-label">类型:</span>
                        <span class="stat-value">{{ weapon.type }}</span>
                    </div>
                    <div class="stat-row weapon-stats">
                        <span class="stat-value">{{ weapon.attribute }} | {{ weapon.secondary }} | {{ weapon.skill }}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 分开刷取方案 -->
    <template v-if="data.is_separate && data.separate_weapons">
        <div v-for="(weaponData, index) in data.separate_weapons" :key="weaponData.id">
            <div class="separator" v-if="index > 0"></div>

            <div class="weapon-info" :class="weaponData.rarity_class">
                <div style="display:flex;align-items:center;">
                    <img class="weapon-icon"
                         :src="'images/' + weaponData.id + '.webp'"
                         @error="imgError">
                    <div style="flex:1;">
                        <div class="weapon-name">{{ weaponData.name }}</div>
                        <div class="stat-row">
                            <span class="stat-label">类型:</span>
                            <span class="stat-value">{{ weaponData.type }}</span>
                        </div>
                        <div class="stat-row weapon-stats">
                            <span class="stat-value">{{ weaponData.attribute }} | {{ weaponData.secondary }} | {{ weaponData.skill }}</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="choice-card" v-for="choice in weaponData.choices" :key="choice.index">
                <div class="choice-header">
                    方案 {{ choice.index }}
                    <span style="color:#666;font-size:14px;margin-left:10px;">
                        (可匹配 {{ choice.matched_count }} 件武器)
                    </span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">刷取地点:</span>
                    <span class="stat-value">{{ choice.battle_name }}</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">基础属性:</span>
                    <span class="stat-value">{{ choice.attributes }}</span>
                </div>
                <div class="stat-row" v-if="choice.secondary !== '-'">
                    <span class="stat-label">附加属性:</span>
                    <span class="stat-value">{{ choice.secondary }}</span>
                </div>
                <div class="stat-row" v-if="choice.skill !== '-'">
                    <span class="stat-label">技能属性:</span>
                    <span class="stat-value">{{ choice.skill }}</span>
                </div>

                <div v-if="choice.matched_weapons && choice.matched_weapons.length" style="margin-top:12px;">
                    <div style="color:#666;font-size:13px;margin-bottom:6px;font-weight:500;">
                        该方案可同时刷取:
                    </div>
                    <div class="weapon-list">
                        <div class="weapon-item"
                             :class="'rarity-' + weapon.rarity"
                             v-for="weapon in choice.matched_weapons"
                             :key="weapon.id">
                            <img class="weapon-small-icon"
                                 :src="'images/' + weapon.id + '.webp'"
                                 @error="imgError">
                            <div style="flex:1;">
                                <div style="font-weight:bold;font-size:13px;">{{ weapon.name }}</div>
                                <div style="font-size:11px;color:#999;">{{ weapon.type }}</div>
                                <div style="font-size:10px;color:#666;margin-top:2px;">
                                    {{ weapon.attribute }} | {{ weapon.secondary }} | {{ weapon.skill }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <!-- 单武器或多武器同时刷取的方案列表 -->
    <template v-if="data.choices && data.choices.length">
        <div class="choice-card" v-for="choice in data.choices" :key="choice.index">
            <div class="choice-header">
                方案 {{ choice.index }}
                <span style="color:#666;font-size:14px;margin-left:10px;">
                    (可匹配 {{ choice.matched_count }} 件武器)
                </span>
            </div>
            <div class="stat-row">
                <span class="stat-label">刷取地点:</span>
                <span class="stat-value">{{ choice.battle_name }}</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">基础属性:</span>
                <span class="stat-value">{{ choice.attributes }}</span>
            </div>
            <div class="stat-row" v-if="choice.secondary !== '-'">
                <span class="stat-label">附加属性:</span>
                <span class="stat-value">{{ choice.secondary }}</span>
            </div>
            <div class="stat-row" v-if="choice.skill !== '-'">
                <span class="stat-label">技能属性:</span>
                <span class="stat-value">{{ choice.skill }}</span>
            </div>

            <!-- 显示匹配的武器列表 -->
            <div v-if="choice.matched_weapons && choice.matched_weapons.length" style="margin-top:12px;">
                <div style="color:#666;font-size:13px;margin-bottom:6px;font-weight:500;">
                    该方案可同时刷取:
                </div>
                <div class="weapon-list">
                    <div class="weapon-item"
                         :class="'rarity-' + weapon.rarity"
                         v-for="weapon in choice.matched_weapons"
                         :key="weapon.id">
                        <img class="weapon-small-icon"
                             :src="'images/' + weapon.id + '.webp'"
                             @error="imgError">
                        <div style="flex:1;">
                            <div style="font-weight:bold;font-size:13px;">{{ weapon.name }}</div>
                            <div style="font-size:11px;color:#999;">{{ weapon.type }}</div>
                            <div style="font-size:10px;color:#666;margin-top:2px;">
                                <span>{{ weapon.attribute }}</span> | <span>{{ weapon.secondary }}</span> | <span>{{ weapon.skill }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <div class="conditions" v-if="data.conditions">查询条件: {{ data.conditions }}</div>

    <div class="weapon-list" v-if="data.weapons && data.weapons.length">
        <div class="weapon-item" :class="'rarity-' + weapon.rarity" v-for="weapon in data.weapons" :key="weapon.id">
            <img class="weapon-icon" style="width:50px;height:50px;"
                 :src="'images/' + weapon.id + '.webp'"
                 @error="imgError">
            <div>
                <div style="font-weight:bold;">{{ weapon.name }}</div>
                <div style="font-size:12px;color:#666;">{{ weapon.type }}</div>
            </div>
        </div>
    </div>
</div>
<script src="https://unpkg.com/vue@2.6.14/dist/vue.min.js"></script>
<script>
    const app = new Vue({
        el: '#app',
        data() {
            return {
                data: {}
            }
        },
        methods: {
            init(renderData) {
                this.data = renderData
            },
            imgError(e) {
                e.target.style.display = 'none'
            }
        },
        mounted() {
            window.init = this.init
        }
    })
</script>
</body>
</html>
